
cpu         ARM64
ident       SKY_CORE

options     SOC_BRCM_BCM2837
options 	SOC_BRCM_BCM2838
options     FDT
options     LINUX_BOOT_ABI

options 	SMP               # Symmetric MultiProcessor Kernel
options 	SCHED_ULE         # ULE scheduler
options 	PREEMPTION		  # Enable kernel thread preemption
options 	INET			  # InterNETworking
options 	INET6			  # IPv6 communications protocols
options 	CC_CUBIC		  # include CUBIC congestion control
options     IPSEC
options 	TCP_OFFLOAD		  # TCP offload
options 	TCP_RFC7413		  # TCP Fast Open
options 	SCTP_SUPPORT	  # Allow kldload of SCTP
options 	KERN_TLS		  # TLS transmit & receive offload
options     MMCCAM
options 	SCSI_DELAY=5000		# Delay (in ms) before probing SCSI

nooptions   ZFS
options     ZSTDIO
options     GZIO
options 	FFS			      # Berkeley Fast Filesystem
options 	SOFTUPDATES		  # Enable FFS soft updates support
nooptions 	UFS_ACL			  # Support for access control lists
options 	UFS_DIRHASH		  # Improve performance on big directories
options 	UFS_GJOURNAL	  # Enable gjournal-based UFS journaling
options 	MSDOSFS		      # MSDOS Filesystem
nooptions 	CD9660			  # ISO 9660 Filesystem
nooptions   UNIONFS
nooptions 	MD_ROOT			  # MD is a potential root device
nooptions   BOOTP
nooptions   BOOTP_NFSROOT
nooptions   BOOTP_NFSV3
nooptions 	NFS_ROOT		  # NFS usable as /, requires NFSCL
nooptions 	NFSCL		      # Network Filesystem Client
nooptions 	NFSD			  # Network Filesystem Server
nooptions 	NFSLOCKD		  # Network Lock Manager

options 	TMPFS			  # Efficient memory filesystem
options 	GEOM_LABEL		  # Provides labelization
options     GEOM_PART_GPT
options     GEOM_PART_BSD
options     GEOM_PART_BSD64
options     GEOM_PART_MBR
options     GEOM_MULTIPATH
options     GEOM_STRIPE
options     GEOM_MIRROR
options 	EFIRT			  # EFI Runtime Services support
options 	COMPAT_FREEBSD32  # Compatible with FreeBSD/arm
options 	COMPAT_FREEBSD11  # Compatible with FreeBSD11
options 	COMPAT_FREEBSD12  # Compatible with FreeBSD12
options 	COMPAT_FREEBSD13  # Compatible with FreeBSD13
options 	SYSVSHM			  # SYSV-style shared memory
options 	SYSVMSG			  # SYSV-style message queues
options 	SYSVSEM			  # SYSV-style semaphores
options 	_KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions

options 	PRINTF_BUFR_SIZE=128	  # Prevent printf output being interspersed.
options 	KBD_INSTALL_CDEV	      # install a CDEV entry in /dev
options 	HWPMC_HOOKS		          # Necessary kernel hooks for hwpmc(4)
options 	MAC			              # TrustedBSD MAC Framework
options     MAC_NTPD
nooptions   MAC_PRIORITY
options 	VFP                       # Floating-point support
options 	RACCT			          # Resource accounting framework
options 	RACCT_DEFAULT_TO_DISABLED # Set kern.racct.enable=0 by default
options 	RCTL			          # Resource limits

# generic
device		cpufreq
device		firmware		# firmware assist module
device		clk
device		phy
device		hwreset
device		nvmem
device		regulator
device		syscon
device      mmio_sram
device		scmi			# System Control Management Interface
device		arm_doorbell		# ARM Message Handling Unit (MHU)
nodevice    xdr

#Storage

device		md			# Memory "disks"
device		ahci
device		scbus
device      mmc
device      mmcsd
device		sdhci
device		da
device      cd
device      pass
nodevice    nvme
nodevice    nvd
nodevice    umass			# Disks/Mass storage - Requires scbus and da
nodevice    cfumass
nodevice    iscsi
nodevice    ctl
nodevice    cfiscsi

# PCI
device		pci
options 	PCI_HP			# PCI-Express native HotPlug
options     NEW_PCIB

# GPIO / PINCTRL
device		gpio
device		gpioled
device		fdt_pinctrl
device		gpioregulator

# I2C
device		iicbus
device		iicmux
device		iic
device		icee			# Generic IIC eeprom
device		bcm2835_bsc		# Broadcom BCM283x I2C bus

# SPI
device		spibus
device		bcm2835_spi		# Broadcom BCM283x SPI bus


# Serial (COM) ports
device		uart			# Generic UART driver
device		pl011
nodevice    ucom
nodevice    uftdi
nodevice    umodem

#usb
options 	USB_HOST_ALIGN=64	# Align usb buffers to cache line size.
device		ohci			# OHCI USB interface
device		uhci			# UHCI USB interface
device		ehci			# EHCI USB interface (USB 2.0)
device		xhci			# XHCI USB interface (USB 3.0)
device		usb			# USB Bus (required)
device      uhid
device		ukbd			# Keyboard
nodevice    dwcotg          # USB OTG support
nodevice    usb_template


# Console
device		vt
device		kbdmux
device		hid			# Generic HID support

device		vt_efifb
device		vt_simplefb
nodevice    splash

# Networking

device      crypto
device      cryptodev
device      ossl            # Use OpenSSL optmized routines since armv8crypto is not available
device		loop			# Network loopback
device		ether			# Ethernet support
nodevice	vlan			# 802.1Q VLAN support
nodevice	tuntap			# Packet tunnel.
nodevice	gif			# IPv6 and IPv4 tunneling
nodevice    gre
nodevice    vxlan
nodevice    bridge
nodevice    enc
device      bpf
nodevice    pf
nodevice    wg


#RPI4 ethernet
device		mii
device      miibus
device      mdio
device		genet			# Broadcom on RPi4

#usb ethernet
nodevice	muge
nodevice	smsc

#explicit disablement
nooptions 	COMPAT_FREEBSD4
nooptions 	COMPAT_FREEBSD5
nooptions 	COMPAT_FREEBSD6
nooptions 	COMPAT_FREEBSD7
nooptions 	COMPAT_FREEBSD9
nooptions 	COMPAT_FREEBSD10
nooptions 	PPC_PROBE_CHIPSET
nooptions 	DEBUG

makeoptions MODULES_OVERRIDE="\
dtb/rpi \
usb/ucom usb/uftdi usb/umodem usb/template usb/quirk usb/umass usb/cfumass usb/dwc_otg \
ctl iscsi cfiscsi nvd nvme \
zfs xdr unionfs cd9660 libiconv cd9660_iconv msdosfs_iconv udf_iconv \
if_vlan if_tuntap if_gif if_gre if_vxlan if_bridge bridgestp if_enc if_wg \
pf \
nfscl nfsd nfssvc nfscommon nfslockd acl_nfs4 acl_posix1e \
mac_priority \
"
